<!-- loio2367101d335e4469869e9c34e73a1873 -->

<link rel="stylesheet" type="text/css" href="../css/sap-icons.css"/>

# Define ID Mapping

Map a source message ID to a target message ID.



## Context

The *ID Mapping* step generates a target message ID that is uniquely associated with certain parameters of the inbound message. The target message ID is a globally unique identifier \(GUID\) that identifies the target message. A receiver can use the target message ID, for example, to make sure that the receiver can process a certain message only once.

When processed the first time, the *ID Mapping* step generates a target message ID for a given combination of the following 2 parameters \(specified in the *ID Mapping* step\):

-   *Source Message ID*

-   *Context*


> ### Note:  
> You can define an ID mapping for 1 single integration flow \(*Visibility* parameter set to *Integration Flow*\) or for all integration flows deployed on the tenant \(*Visibility* parameter set to *Global*\).
> 
> The following rule applies for ID mappings with *Visibility* parameter set to *Integration Flow*:
> 
> If processed in different integration flows, ID mappings generate different target message IDs also for the same combination of *Source Message ID* and *Context*.

The *ID Mapping* step writes the target message ID into a header \(specified in the *ID Mapping* step\).

If processed at a later point in time with the same combination of *Source Message ID* and *Context* parameter values, the *ID Mapping* uses the target message ID generated \(for this combination\) the first time and writes it into the specified header.

The system stores an ID mapping temporarily in the tenant database for a dedicated time period \(as specified by the *Expiration Period* parameter\). When this time has passed, the *ID Mapping* step generates a new target message ID also for an already known combination of *Source Message ID* and *Context*.

This feature supports the following use cases:

-   A message associated with certain attributes is to be processed only once.

    > ### Note:  
    > Example:
    > 
    > A sender sends a message with a purchase order to a receiver. Furthermore, there's the chance that the receiver gets a message associated with the same purchase order number multiple times. Using ID Mapping, you can make sure that the receiver processes messages associated with the same purchase order number only once.

    > ### Note:  
    > The message ID generated by the system is uniquely associated with the message processing run. Because of this, the receiver can't use the generated message ID to identify duplicate messages \(associated with the same purchase order\).

-   The source message ID must be kept secret. Therefore, the source message ID has to be mapped to another value before the message is sent to a remote system.

-   The source message is split or sent to different branches \(multicast pattern\). In such a scenario, there's one source message ID and multiple target message IDs.


For an example how to use this feature, see [ID Mapping Example](id-mapping-example-581ecfc.md).



## Procedure

1.  Add an *ID Mapping* step to the integration process:

    1.  In the palette, choose <span class="SAP-icons"></span> \(Mapping\) and then choose <span class="SAP-icons"></span> \(ID Mapping\) from the menu.

    2.  Place the *ID Mapping* shape in the integration process.


2.  Select the *Processing* tab to specify the parameters of the step.


    <table>
    <tr>
    <th valign="top">

    Parameter
    
    </th>
    <th valign="top">

    Description
    
    </th>
    </tr>
    <tr>
    <td valign="top">
    
    Source Message ID
    
    </td>
    <td valign="top">
    
    The source message ID.

    The source message ID can be dynamically read from a header or property using an expression such like `${property.messageID}` or `${header.messageID}`.
    
    </td>
    </tr>
    <tr>
    <td valign="top">
    
    Target Header Name
    
    </td>
    <td valign="top">
    
    Name of the header in which to store the target message ID.
    
    </td>
    </tr>
    <tr>
    <td valign="top">
    
    Context
    
    </td>
    <td valign="top">
    
    Defines the context the target message ID is generated for.

    Typically, the context is used to identify the receiver.

    If you use the *ID Mapping* step in a splitter or multicast scenario to map the ID of the source message to multiple target message IDs, the *Context* is defined per target message.

    The context can be dynamically read from a header or property using an expression such like `${property.context}` or `${header.context}`.

    > ### Note:  
    > The value of the *Context* parameter has to start with at least one letter which can be followed by multiple letters, digits, or any of the following special characters:
    > 
    > `_`
    > 
    > `~`
    > 
    > `-`


    
    </td>
    </tr>
    <tr>
    <td valign="top">
    
    Visibility
    
    </td>
    <td valign="top">
    
    Defines whether the ID mapping is shared by all integration flows \(deployed on the tenant\) or only by one specific integration flow.

    -   *Global*: ID mapping is shared across all integration flows deployed on the tenant.

    -   *Integration Flow*: ID mapping is used by 1 integration flow. An ID mapping configured with this setting is also referred to as local ID mapping.



    
    </td>
    </tr>
    <tr>
    <td valign="top">
    
    Expiration Period \(in d\)
    
    </td>
    <td valign="top">
    
    Number of days after which the stored ID mapping is deleted \(default is 30 days\).
    
    </td>
    </tr>
    </table>
    
3.  Save the integration flow.


